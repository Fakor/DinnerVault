<!DOCTYPE html>
<html lang="sv">
<head>
<script type="text/javascript">
function get_action(is_new, id){
    if (is_new){
        return "{% url 'create_meal' %"
    } else {
        var str1 = "{% url 'edit_meal/"
        str1.concat(id, "' %")
        return "{% url 'edit_meal' %"
    }
}
</script>
{% load static %}
<meta charset="UTF-8">
<style>
* {
    box-sizing: border-box;
}
.column {
    float: left;
    width: 33%;
    padding: 10px;
}
.row:after {
    content:"";
    display:"table";
    clear:"both";
}
</style>


{% load static %}
<link rel='stylesheet' href="{% static '/main/css/base.css' %}">
<title>Edit meal</title>
</head>
<body>
        <div class="row">
    <form action="" onsubmit="this.action=get_action({{ new }}, {{ id }})" method="post">
        {% csrf_token %}
            <div class="column">
                <p>{{ form.name.label }} {{ form.name }}</p>
            </div>
            <div class="column" style="background-color:#aaa;">
                <h2>Labels</h2>
                {% for label in form_labels %}
                    <p>
                    <span class="checkboxtext">
                        {{ label }} {{ label.name }}
                    <br>
                    </span>
                    </p>
                {% endfor %}
            </div>
    </form>
    <form action="/main/edit_meal/{{ id }}/" method="post">
        {% csrf_token %}
            <div class="column" style="background-color:#777">
                <h2>Dates</h2>
                {% for date in dates %}
                    <p>
                    <span class="checkboxtext">
                    <input type="checkbox" name="dates" value={{ date.id }}> {{ date.date|date:'Y-m-d' }}
                    <br>
                    </span>
                    </p>

                {% endfor %}
                <button class="sub"
                        type="submit"
                        name="delete_dates"
                        formaction="/main/edit_meal/{{ id }}/">
                    Delete dates
                </button>
            </div>
    </form>
        </div>
</body>
</html>
